







Основы веб разработки

Лабораторная работа №4
Базовый фронтен на React


Цель работы
Создать клиентскую часть веб-приложения с авторизацией, регистрацией и отображением списка мероприятий
Критерии выполнения
1. Пользователю должны быть доступны следующие страницы:
● Главная
○ Страница должна включать краткое описание приложения, логотип. 
○ На странице должны находиться кнопки для перехода на страницу авторизации, регистрации и списка мероприятий. 
○ Рекомендуется располагать кнопки регистрации и авторизации в шапке страницы.
○ На странице должен отображаться индикатор что пользователь авторизован(Например имя пользователя) и быть недоступны кнопки для повторной авторизации или регистрации. 
● Авторизация 
○ Должна включать форму для авторизации (поля, кнопку для подтверждения), кнопку для перехода на страницу регистрации. 
○ При успешной авторизации пользователя необходимо перенаправить на страницу мероприятий.
○ При вводе url страницы авторизации – авторизованного пользователя должно перебросить на страницу мероприятий.
● Регистрация
○ Должна включать форму для регистрации (поля, кнопку подтверждения), кнопку для перехода на страницу авторизации. 
○ После успешной регистрации необходимо отправлять перенаправлять пользователя на страницу авторизации.
● Список мероприятий 
○ Необходимо отобразить информацию о мероприятиях в виде карточек используя для верстки flex или grid.
○ На странице должен отображаться индикатор что пользователь авторизован(Например имя пользователя) и быть недоступны кнопки для повторной авторизации или регистрации. 
● 404 – страница информирующая о том что запрашиваемая страница не найдена (для всех остальных путей)
Страницы должны быть удобным и понятным с точки зрения пользователя, допускается использование любых других элементов для создания дизайна страницы.
Страница должна корректно отображаться на разрешениях больше 320px (Должен быть минимальный адаптив). 
2. При случае ошибки при выполнении запроса к серверу необходимо на странице отобразить корректное сообщение об этом (Код ошибки + краткий текст ошибки). Использовать alert, prompt, confirm запрещено, ошибку необходимо отображать на самой странице странице.
3. Структура проект (иерархия файлов и папок) должна быть оформлена согласно примеру в шагах выполнения, либо, в случае использования другой, должен быть корректно обоснован выбор.
4. Проект должен быть реализован с использованием React, Vite, TypeScript и Yarn
5. В проекте должен быть настроен ESLint и Prettier.
6. Хранение токена авторизации должно быть с использованием localStorage или Cookie.
7. Должны быть выполнено дополнительное задание в соответствии с вариантом. 
8. Работа с репозиторием:
1. Работа над лабораторной должна вестись в отдельной ветке ответвлений от основной (master/main). 
2. В рамках лабораторной работы необходимо сделать минимум 3 коммита:
● Коммит после инициализации фронтенд проекта
● Коммит после выполнения основного задания
● Коммит после выполнения дополнительного задания по варианту
3. Для коммитов использовать следующий шаблон названий (типы коммитов можно посмотреть в Приложении 1 к лабораторной работе):
{Тип коммита}: {Номер задачи} <Описание с ответом на вопрос “Что сделано?”>
Пример: feat: LAB2 Добавлено Readme с описанием шагов для запуска приложения
4. Должен быть оформлен Merge Request ветки лабораторной работы в главную ветку. Должно быть указано описание что было сделано, какие здания реализовывались по варианту. Мерж ревест можно смержить сразу, главное без сквоша коммитов и удаления ветки.



Основные шаги выполнения
Подготовка и настройка проекта
1. Создайте новый проект на основе Vite и шаблона react-ts, в качестве пакетного менеджера для фронтенда необходимо использовать yarn.
Для этого можно воспользоваться следующими командами выполненными в корне репозитория:

2. Так же установите и настройте prettier аналогично бекенд проекту. ESLint уже включен в шаблон react-ts.

3. Установите необходимые библиотеки:
○ react-router-dom – маршрутизация
○ axios – работа с API
○ classnames – удобное объединение классов
4. Создайте структуру папок внутри директории src:
○ pages –  корневые компоненты страниц и компоненты используемые на этих страницах (в подпапке components для каждой страницы);
○ components – переиспользуемые в разных частях приложения компоненты (например стилизованные кнопки);
○ api – логика работы с сервером;
○ utils – вспомогательные функции (Например работа с localStorage);
○ types – типы TS используемые в приложении
Пример структуры и папок представлен ниже:


Представленная структура проекта является рекомендуемой, но не обязательной в том случае, если выбор другой структуры сможете обосновать во время защиты работы.


Маршрутизация страниц
Используя библиотеку react-router создайте роутинг для страниц приложения.


Реализация страниц
Для каждой страницы необходимо создать отдельные папки в директории pages. Каждая папка страницы должна содержать файлы {PageName}.tsx и {PageName}.module.scss и подпапку components в которой будут храниться компоненты используемые на этой странице. 

Рекомендации по выполнению данного шага:
1. Для компонента с ошибкой можно создать отдельный компоненты в папке src/components и использовать его везде где это будет необходимо. С точки зрения верстки его можно сделать абсолютно позиционированным на странице и закрепить в одном из углов экрана.
2. Для редиректа при авторизации или регистрации используйте useNavigate из пакете react-router
3. Стили для каждой страницы можно хранить в отдельном файле {PageName}.module.scss. Для их использования необходимо импортировать этот файл и передать в TSX верстку, в поле classNames элемента необходимый стиль.

Реализация запросов к серверу
Необходимо реализовать методы для авторизации, регистрации и получения данных о мероприятиях с сервера. 
Для этого в директории src/api создайте файлы authService.ts (авторизация и регистрация) и eventService.ts (работа с эвентами), в которые поместите методы для выполнения запросов с использованием библиотеки axios. Так же стоит создать файл axios.ts (или baseApi.ts) в котором создайте экземпляр axios (используйте метод axios.create()).

Рекомендации по выполнению данного шага:
1. Для работы с localStorage или куки лучше создать отдельный файл в src/utils и поместить туда все функции.
2. Для того что бы не указывать baseUrl для запросов к серверу каждый раз как необходимо их сделать – можно вынести значение в .env файл (Vite из коробки поддерживает его использование) и создать axiosInstance, уже который вызывать там где это необходимо.


Добавление запросов к серверу в логику страниц
Теперь необходимо настроить отправку запросов при показе компонентов, нажатии кнопок, в соответствии с критериями выполнения лабораторной работы.
Рекомендации по выполнению шага:
1. Выполняйте запросы внутри useEffect
2. Используйте useState для хранения информации полученной с сервера.
3. Используйте ранее созданные утилиты работы c localStorage или куки для получения информации о том, авторизован пользователь или нет.




Задания по вариантам
1. Добавление поля "Локация" для мероприятия
● В карточке мероприятия необходимо отобразить дополнительное поле – location.
● В базе данных строка location по мероприятию должна быть в виде “55.684758, 37.738521”
● Подключить яндекс карту используя эту библиотеку 
● Добавить отображение мероприятий в виде точек на ней (пример)
● Карта должна располагаться на странице мероприятий и отображать на себе все локации где проходят мероприятия
2. Добавление категории мероприятия
● На карточек мероприятия необходимо отобразить дополнительное поле – категория
● На странице с мероприятиями добавить фильтр, позволяющий показать мероприятия для выбранной категории.

3. Фильтрация мероприятий по дате
● На карточек мероприятия необходимо отобразить дополнительное поле дата мероприятия
● На странице с мероприятиями добавить элемент управления, позволяющий выбрать временной промежуток за который необходимо отобразить мероприятия
4. Добавление поиска мероприятий
● Добавить поле для поиска по тексту (название и описание) мероприятия
● Поиск должен использовать механизм debounce ( отправка запроса только после прошествия некоторого времени, если пользователь закончил ввод текста, а не при вводе каждого символа)
5. Ограничение количества мероприятий на странице (пагинация)
● Добавить элементы для пагинации списка мероприятий

● Добавить возможность выбрать сколько мероприятий отображать на странице
● Кнопки страниц должны высчитываться как {всего мероприятий}/ { мероприятий на странице}
6. Переключатель “Закрытые мероприятия” (Soft delete)
● Доработать бекенд, добавив возможность передав определенный параметр в запрос на получение списка мероприятий получить список включая “удаленные”
● Добавить переключатель позволяющий отобразить “удаленные” при помощи soft delete мероприя
● Показать дополнительным полем дату их удаления (только для “удаленных”)
7. Отображение изображения мероприятия
● Добавить отображения изображения мероприятия на карточку

Варианты

ВариантЗадание112233445566778192103114125136147151162173184195206217221232243254265276



Контрольные вопросы
Общие вопросы по React
1. Что такое SPA?
2. В чем основные преимущества React по сравнению с другими библиотеками и фреймворками?
3. Как работает Virtual DOM, и почему он ускоряет рендеринг?
4. Что такое JSX, и как он преобразуется в JavaScript?
5. Каковы основные принципы работы компонентов в React (Жизненный цикл)?
6. Что такое пропсы (props), и как их передавать в компоненты?
7. Как работает состояние (state) в функциональных компонентах?
8. Что такое условный рендеринг?
9. Что такое хук в React?
10. Как использовать useState для управления состоянием компонента?
11. Как работает useEffect, и когда его следует использовать?
12. Как работает передача данных между родительским и дочерним компонентом?
13. Как можно уменьшить количество ненужных перерисовок компонентов?
Стилизация с CSS-модулями
14. В чем отличие CSS-модулей от обычных CSS-файлов?
15. Как подключить CSS-модули в React-компонент?
16. Как динамически менять классы в CSS-модулях?
Работа с API и авторизацией
17. Как выполнить запрос к серверу в React приложении?
18. В чем разница между fetch и axios?
19.  Для чего необходимо создавать инстанс axios?
20. Как правильно хранить и использовать токен после авторизации пользователя?
21. Как обработать ошибки при запросах к серверу?
Маршрутизация в React
22. Как работает react-router?
23. Как настроить маршруты в React-приложении?
24. Как передавать параметры в URL (динамические маршруты)?
25. Как произвести редирект на другой маршрут используя react-router?
Прочее
26. Что такое Vite?
27. Как использовать .env в React



Приложение 1
Соглашение о коммитах

Типы в коммитах
● Изменения, относящиеся к функционалу
○ feat – Коммиты, которые добавляют или удаляют новый функционал
○ fix – Коммиты, исправляющие ошибки
● refactor – Коммиты, которые переписывают/реструктурируют ваш код, однако не изменяют поведение.
○ perf коммиты это специальные refactor-коммиты, которые улучшают производительность.
● style – Коммиты, которые не влияют на смысл (пробелы, форматирование, пропущенные точки с запятой и т. д.)
● test – Коммиты, добавляющие отсутствующие тесты или исправляющие существующие тесты
● docs – Коммиты, которые влияют только на документацию
● chore – Различные коммиты, например, изменение.gitignore

Типы в ветках
● feature - добавление нового функционала
● fix - исправление ошибок
● refactor - рефакторинг кода без исправления ошибок или добавления новых функций
● perf - изменения направленные на улучшение производительности
● style - правки по код-стайлу
● test - добавление и изменение тестов
● doc - обновление документации

Документация по git
https://git-scm.com/book/ru/v2
