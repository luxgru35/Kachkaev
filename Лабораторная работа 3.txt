







Основы веб разработки

Лабораторная работа №3
Введение в TypeScript, настройка ESLint и Prettier


Цель работы
● Освоить базовые знания по TypeScript.
● Настроить ESLint и Prettier для автоматического контроля качества кода.
● Перевести код предыдущих лабораторных работ на TypeScript.
● Настроить удобные команды для линтинга и форматирования.


Критерии выполнения
1. Весь проект выполненный в рамках предыдущих лабораторных должен быть переведен на TS.
2. В проекте должен использоваться ES синтаксис модулей ( import/export вместо require)
3. При запуске проверок не должно возникать ошибок TS и ESLint.
4. Должны быть выполнены дополнительные задания в соответствии с вариантом. 
4. Работа с репозиторием:
1. Работа над лабораторной должна вестись в отдельной ветке ответвлений от основной (master/main). 
2. В рамках лабораторной работы необходимо сделать минимум 2 коммита:
● Коммит после выполнения основного задания
● Коммит после выполнения заданий по варианту
3. Для коммитов использовать следующий шаблон названий (типы коммитов можно посмотреть в Приложении 1 к лабораторной работе):
{Тип коммита}: {Номер задачи} <Описание с ответом на вопрос “Что сделано?”>
Пример: feat: LAB2 Добавлено Readme с описанием шагов для запуска приложения
4. Должен быть оформлен Merge Request ветки лабораторной работы в главную ветку. Должно быть указано описание что было сделано, какие здания реализовывались по варианту. Мерж ревест можно смержить сразу, главное без сквоша коммитов и удаления ветки.



Краткая вводная
TypeScript (TS)
TypeScript — это надстройка над JavaScript, добавляющая статическую типизацию. Код на TS компилируется в JavaScript, что делает его совместимым со всеми браузерами.

Основные преимущества TypeScript:
● Статическая типизация — предотвращает ошибки на этапе компиляции.
● Автодополнение и улучшенная поддержка в IDE (например, VS Code).
● Современные возможности ESNext — работает с новыми фичами JS.
● Интерфейсы и типы — удобны для описания структуры данных.


ESLint
ESLint — это инструмент для анализа и исправления проблем в коде. Он помогает поддерживать единый стиль и предотвращать ошибки.

Зачем нужен ESLint?
● Предотвращает ошибки (например, неиспользуемые переменные, забытые await в async-функциях).
● Обеспечивает единый стиль написания кода в команде.
● Настраивается через конфигурационный файл .eslintrc.json.

Пример правила в .eslintrc.json


Prettier
Prettier — это инструмент для автоматического форматирования кода.

Что делает Prettier?
● Автоматически расставляет отступы, кавычки, пробелы.
● Обеспечивает единый стиль написания кода в команде.
● Работает в паре с ESLint (ESLint проверяет ошибки, Prettier — исправляет стиль).

Пример конфига .prettierrc.json


Основные шаги выполнения
Установка и настройка TypeScript
1. Установите TypeScript (фиксированная версия):

2. Создайте файл tsconfig.json, запустив команду:

3. Ваш файл tsconfig.json должен иметь следующие настройки:



Установка и настройка ESLint
1. Установите ESLint и плагины:

2. Инициализируйте ESLint следующей командой:

3. В CLI ESLint выберите:

● "To check syntax and find problems"
● "JavaScript modules (import/export)"
● "TypeScript"
● "Node"

4. Добавьте в файл .eslintrc.json настройки TypeScript:



Установка и настройка Prettier
1.  Установка Prettier и необходимые плагины

2. Создайте файл .prettierrc.json:

3. Обновите .eslintrc.json, добавив:

      И правило:



Добавление скриптов в package.json
Добавьте в package.json раздел scripts:

● tsc — компиляция TypeScript
● lint — проверка кода ESLint
● format — автоформатирование Prettier
● check — проверка кода без изменения файлов

Запуск команд:




Перевод кода предыдущих лабораторных на TypeScript
1. Переименуйте файлы .js → .ts.
2. Переведите проект на ES синтаксис импортов (замена require на import/export,  если это небыло сделано ранее), указав в package.json   "type": "module".
3. Добавьте типы к параметрам функций, объектам и классам.
4. Проверьте, что код компилируется и нет ошибок ESLint, в случае возникновения – исправьте:

5. Отформатируйте код Prettier:


Внимание! Для облегчения работы с использованием TS, ESLint и Pritter не забудьте включить их использвание в своей IDE. Например в WebStorm по умолчания все эти инструменты отключены.
 


Примеры перевода на TypeScript
Контроллер событий:

Модель Sequelize:





Задания по вариантам
1. Добавить pre-commit хук с husky и lint-staged для прогона команд lint и format перед каждым коммитом
2. Настроить ts алиасы, что бы вместо длинных относительных импортов (import Event from '../../models/Event') использовать алиасы (import Event from '@models/Event').


Варианты
ВариантЗаданиеВсе варианты1, 2


Контрольные вопросы
Общие вопросы по TypeScript
1. Чем TypeScript отличается от JavaScript?
2. Какие преимущества и недостатки при использование TypeScript в проекте?
3. Какие основные типы данных есть в TypeScript?
4. В чем разница между interface и type?
5. Что такое unknown и чем он отличается от any?
6. Как использовать generics в TypeScript?
7. Как задать тип для аргументов и возвращаемого значения функции в TypeScript?
8. Как типизировать функции, принимающие коллбэки?
9. Как объявить опциональные параметры в функциях?
10.  Что такое Utility Types, какие есть, для чего нужны?
11. Какую роль играет файл tsconfig.json?
12. Что делает флаг "strict": true в tsconfig.json?
13. Как настроить абсолютные импорты в TypeScript?
14. Как типизировать асинхронные функции в TypeScript?
ESLint и Prettier
1. В чем разница между ESLint и Prettier?
2. Как настроить автоформатирование кода перед коммитом?





Приложение 1
Соглашение о коммитах

Типы в коммитах
● Изменения, относящиеся к функционалу
○ feat – Коммиты, которые добавляют или удаляют новый функционал
○ fix – Коммиты, исправляющие ошибки
● refactor – Коммиты, которые переписывают/реструктурируют ваш код, однако не изменяют поведение.
○ perf коммиты это специальные refactor-коммиты, которые улучшают производительность.
● style – Коммиты, которые не влияют на смысл (пробелы, форматирование, пропущенные точки с запятой и т. д.)
● test – Коммиты, добавляющие отсутствующие тесты или исправляющие существующие тесты
● docs – Коммиты, которые влияют только на документацию
● chore – Различные коммиты, например, изменение.gitignore

Типы в ветках
● feature - добавление нового функционала
● fix - исправление ошибок
● refactor - рефакторинг кода без исправления ошибок или добавления новых функций
● perf - изменения направленные на улучшение производительности
● style - правки по код-стайлу
● test - добавление и изменение тестов
● doc - обновление документации

Документация по git
https://git-scm.com/book/ru/v2
